
import b2
import backgammon

def test_65():
    board = backgammon.make_board()
    assert b2.moves(board, 6, 5) == [ 
        ((24, 18), (18, 13)),
        ((24, 18), (13, 8)),
        ((24, 18), (8, 3)),
        ((13, 8), (13, 7)),
        ((13, 8), (8, 2)),
        ((13, 7), (8, 3)),
        ((13, 7), (7, 2)),
        ((8, 3), (8, 2))
    ]


def test_bearoff():
    str = """___________________________________________
|                  |   |                  |
|13 14 15 16 17 18 |   |19 20 21 22 23 24 |
|                  |   |                ○ |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |BAR|                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   | ●              ● |
|12 11 10  9  8  7 |   | 6  5  4  3  2  1 |
|__________________|___|__________________|
"""
    board = backgammon.from_str(str, player_1_color=backgammon.Color.Dark)
    moves = b2.moves(board, 6, 1)
    assert moves == [((6, 5), (5, -1)), ((6, 0), (1, 0)), ]

def test_bearoff_2():
    str = """___________________________________________
|                  |   |                  |
|13 14 15 16 17 18 |   |19 20 21 22 23 24 |
|                  |   |                ○ |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |BAR|                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   | ●  ●           ● |
|12 11 10  9  8  7 |   | 6  5  4  3  2  1 |
|__________________|___|__________________|
"""
    board = backgammon.from_str(str, player_1_color=backgammon.Color.Dark)
    moves = b2.moves(board, 5, 2)
    assert moves == [((6, 4), (5, 0)), ((6, 1), (5, 3)), ]

def test_bearoff_3():
    str = """___________________________________________
|                  |   |                  |
|13 14 15 16 17 18 |   |19 20 21 22 23 24 |
|                  |   |                ○ |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |BAR|                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   | ●  ●           ● |
|12 11 10  9  8  7 |   | 6  5  4  3  2  1 |
|__________________|___|__________________|
"""
    board = backgammon.from_str(str, player_1_color=backgammon.Color.Dark)
    moves = b2.moves(board, 3, 2)
    assert moves == [((6, 4), (5, 2)), ((6, 4), (4, 1)), ((6, 3), (5, 3)), ((6, 3), (3, 1)), ((5, 3), (3, 0)), ((5, 2), (2, 0))]

def test_bearoff_4():
    str = """___________________________________________
|                  |   |                  |
|13 14 15 16 17 18 |   |19 20 21 22 23 24 |
|                  |   |                ○ |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |BAR|                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   |                  |
|                  |   | ●  ●           ● |
|12 11 10  9  8  7 |   | 6  5  4  3  2  1 |
|__________________|___|__________________|
"""
    board = backgammon.from_str(str, player_1_color=backgammon.Color.Dark)
    moves = b2.moves(board, 2, 2)
    assert moves == [((6, 4), (5, 3), (4, 2), (3, 1))]
